<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Login e Cadastro</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <img src="/static/assets/supermais1.png" alt="Logo da empresa" class="logo">
        <h1>Login</h1>
        <form action="/login" method="POST">
            <input type="email" name="email" placeholder="Seu e-mail" required>
            <input type="password" name="senha" placeholder="Senha" required>
            <button type="submit">Entrar</button>
            <div style="text-align: center; margin-top: 15px;">
              <a href="#" style="text-decoration: none; color: #007BFF;">Esqueci minha senha</a>
            </div>

        </form>

        <h2>Cadastro</h2>
        <form action="/cadastro" method="POST">
         <input type="text" name="nome" placeholder="Seu nome" required>
         <input type="email" name="email" placeholder="Seu e-mail" required>
         <input type="password" name="senha" placeholder="Senha" id="senhaCadastro" required>
        
         <p id="mensagemSenha">
            <span id="iconeSenha">❌</span> Sua senha precisa de no mínimo 12 caracteres.
         </p>

          <button type="submit">Cadastrar</button>
        </form>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="mensagens">
                    {% for category, message in messages %}
                        <div class="alert {{ category }}">{{ message }}</div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
    </div>

<script>
  const senhaInput = document.getElementById('senhaCadastro');
  const mensagemSenha = document.getElementById('mensagemSenha');
  const iconeSenha = document.getElementById('iconeSenha');
  const toggleSenha = document.getElementById('toggleSenha');

  // Esconde a mensagem inicialmente
  mensagemSenha.style.display = 'none';

  senhaInput.addEventListener('input', () => {
    const senha = senhaInput.value;

    if (senha.length === 0) {
      mensagemSenha.style.display = 'none';
    } else {
      mensagemSenha.style.display = 'block';

      if (senha.length >= 12) {
        mensagemSenha.classList.add('valida');
        mensagemSenha.classList.remove('invalida');
        iconeSenha.textContent = '✅';
      } else {
        mensagemSenha.classList.remove('valida');
        mensagemSenha.classList.add('invalida');
        iconeSenha.textContent = '❌';
      }
    }
  });
</script>

</body>
</html>
